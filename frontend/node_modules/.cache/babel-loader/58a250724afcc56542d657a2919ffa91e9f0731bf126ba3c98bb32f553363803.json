{"ast":null,"code":"var _jsxFileName = \"/Users/konstantinvaliotti/basicchatbot/frontend/src/components/ChatInterface.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport { useChatContext } from '../context/ChatContext';\nimport { chatService } from '../services/chatService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  apiKey\n}) => {\n  _s();\n  const {\n    messages,\n    addMessage,\n    currentConversationId,\n    setCurrentConversationId\n  } = useChatContext();\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleSendMessage = async content => {\n    if (!content.trim()) return;\n\n    // Add user message\n    addMessage({\n      role: 'user',\n      content: content.trim(),\n      timestamp: new Date()\n    });\n    setIsLoading(true);\n    try {\n      const response = await chatService.sendMessage({\n        message: content.trim(),\n        api_key: apiKey,\n        conversation_id: currentConversationId !== null && currentConversationId !== void 0 ? currentConversationId : undefined\n      });\n\n      // Update conversation ID if it's a new conversation\n      if (!currentConversationId) {\n        setCurrentConversationId(response.conversation_id);\n      }\n\n      // Add AI response\n      addMessage({\n        role: 'assistant',\n        content: response.response,\n        timestamp: new Date()\n      });\n    } catch (error) {\n      console.error('Error sending message:', error);\n      addMessage({\n        role: 'assistant',\n        content: 'Sorry, I encountered an error while processing your request. Please check your API key and try again.',\n        timestamp: new Date()\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleNewConversation = () => {\n    setCurrentConversationId(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-96\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center p-4 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-800\",\n        children: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleNewConversation,\n        className: \"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors text-sm\",\n        children: \"New Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4\",\n      children: [/*#__PURE__*/_jsxDEV(MessageList, {\n        messages: messages,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(MessageInput, {\n        onSendMessage: handleSendMessage,\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"pIuUQW62s0yrnQze//WxgbhwNxw=\", false, function () {\n  return [useChatContext];\n});\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","MessageList","MessageInput","useChatContext","chatService","jsxDEV","_jsxDEV","ChatInterface","apiKey","_s","messages","addMessage","currentConversationId","setCurrentConversationId","isLoading","setIsLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","content","trim","role","timestamp","Date","response","sendMessage","message","api_key","conversation_id","undefined","error","console","handleNewConversation","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","onSendMessage","disabled","_c","$RefreshReg$"],"sources":["/Users/konstantinvaliotti/basicchatbot/frontend/src/components/ChatInterface.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport { useChatContext } from '../context/ChatContext';\nimport { chatService } from '../services/chatService';\n\ninterface ChatInterfaceProps {\n  apiKey: string;\n}\n\nconst ChatInterface: React.FC<ChatInterfaceProps> = ({ apiKey }) => {\n  const { messages, addMessage, currentConversationId, setCurrentConversationId } = useChatContext();\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async (content: string) => {\n    if (!content.trim()) return;\n\n    // Add user message\n    addMessage({\n      role: 'user',\n      content: content.trim(),\n      timestamp: new Date()\n    });\n\n    setIsLoading(true);\n\n    try {\n      const response = await chatService.sendMessage({\n        message: content.trim(),\n        api_key: apiKey,\n        conversation_id: currentConversationId ?? undefined\n      });\n\n      // Update conversation ID if it's a new conversation\n      if (!currentConversationId) {\n        setCurrentConversationId(response.conversation_id);\n      }\n\n      // Add AI response\n      addMessage({\n        role: 'assistant',\n        content: response.response,\n        timestamp: new Date()\n      });\n\n    } catch (error) {\n      console.error('Error sending message:', error);\n      addMessage({\n        role: 'assistant',\n        content: 'Sorry, I encountered an error while processing your request. Please check your API key and try again.',\n        timestamp: new Date()\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleNewConversation = () => {\n    setCurrentConversationId(null);\n  };\n\n  return (\n    <div className=\"flex flex-col h-96\">\n      <div className=\"flex justify-between items-center p-4 border-b border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-800\">Chat</h3>\n        <button\n          onClick={handleNewConversation}\n          className=\"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors text-sm\"\n        >\n          New Chat\n        </button>\n      </div>\n      \n      <div className=\"flex-1 overflow-y-auto p-4\">\n        <MessageList messages={messages} isLoading={isLoading} />\n        <div ref={messagesEndRef} />\n      </div>\n      \n      <div className=\"border-t border-gray-200 p-4\">\n        <MessageInput onSendMessage={handleSendMessage} disabled={isLoading} />\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}